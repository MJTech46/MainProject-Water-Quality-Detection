{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Profile - BreatheWell</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background: url('{% static "assets/img/health/background2.webp" %}') no-repeat center center fixed;
      background-size: cover;
      min-height: 100vh;
    }

    body::before {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      z-index: 0;
    }

    .card {
      backdrop-filter: blur(25px);
      background: rgba(255, 255, 255, 0.1);
      border-radius: 2rem;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
      z-index: 10;
      padding: 3rem;
      max-width: 600px;
      width: 95%;
      animation: fadeInUp 0.8s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    input, select, textarea {
      transition: all 0.3s ease;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #4ade80;
      box-shadow: 0 0 8px rgba(74, 222, 128, 0.5);
    }

    .btn-primary {
      background: #4ade80;
      color: #fff;
      transition: all 0.3s ease;
    }

    .btn-primary:hover {
      background: #22c55e;
      transform: scale(1.05);
    }

    .btn-cancel {
      border: 2px solid #fff;
      color: #fff;
      transition: all 0.3s ease;
    }

    .btn-cancel:hover {
      background: #fff;
      color: #000;
      transform: scale(1.05);
    }

    h2 {
      border-bottom: 2px solid #4ade80;
      padding-bottom: 0.5rem;
      display: inline-block;
      margin-bottom: 1.5rem;
    }
  </style>
</head>

<body class="relative flex justify-center items-center py-16">

  <div class="card relative text-white">
    <h2 class="text-3xl font-bold">Edit Profile</h2>

    <form method="POST" enctype="multipart/form-data" class="space-y-5 mt-4">
      {% csrf_token %}

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <!-- Username -->
        <div>
          <label class="block mb-1 font-medium">Username</label>
          <input type="text" name="username" value="{{ user.username }}" class="w-full px-4 py-2 rounded-lg text-black" required>
        </div>

        <!-- Age -->
        <div>
          <label class="block mb-1 font-medium">Age</label>
          <input type="number" name="age" value="{{ user.age }}" class="w-full px-4 py-2 rounded-lg text-black">
        </div>

        <!-- Gender -->
        <div>
          <label class="block mb-1 font-medium">Gender</label>
          <select name="gender" class="w-full px-4 py-2 rounded-lg text-black">
            <option value="M" {% if user.gender == 'M' %}selected{% endif %}>Male</option>
            <option value="F" {% if user.gender == 'F' %}selected{% endif %}>Female</option>
            <option value="O" {% if user.gender == 'O' %}selected{% endif %}>Other</option>
          </select>
        </div>

        <!-- Phone -->
        <div>
          <label class="block mb-1 font-medium">Phone</label>
          <input type="text" name="phone" value="{{ user.phone }}" class="w-full px-4 py-2 rounded-lg text-black">
        </div>

        <!-- Email -->
        <div class="sm:col-span-2">
          <label class="block mb-1 font-medium">Email</label>
          <input type="email" name="email" value="{{ user.email }}" class="w-full px-4 py-2 rounded-lg text-black" required>
        </div>

        <!-- Address -->
        <div class="sm:col-span-2">
          <label class="block mb-1 font-medium">Address</label>
          <textarea name="address" class="w-full px-4 py-2 rounded-lg text-black">{{ user.address }}</textarea>
        </div>

        <!-- Profile Image -->
        <div class="sm:col-span-2">
          <label class="block mb-1 font-medium">Profile Image</label>
          <input type="file" name="image" class="w-full text-white">
          {% if current_image_name %}
          <p class="mt-2 text-sm">Current Image: {{ current_image_name }}</p>
          {% endif %}
        </div>
      </div>

      <!-- Buttons -->
      <div class="flex gap-4 mt-6">
        <button type="submit" class="btn-primary px-6 py-2 rounded-lg font-medium">Save Changes</button>
        <a href="{% url 'profile' %}" class="btn-cancel px-6 py-2 rounded-lg font-medium">Cancel</a>
      </div>
    </form>
  </div>

</body>

</html>
